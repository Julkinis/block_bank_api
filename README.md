# Сервис по управлению блокировками платежей

В рамках нашего проекта реализован сервис для приостановки платежей клиентов в случае подозрений на мошенничество или неправильных реквизитов. Это необходимо для обеспечения безопасности и корректности выполнения платежей.

## Функционал

1. **Блокировка платежей клиента**

   Для приостановки платежей клиента используется метод **POST** по адресу `/clients/{clientId}/payment-blocks`. В теле запроса передаются следующие данные:
   
   - **reason**: причина блокировки (например, подозрение на мошенничество или некорректные реквизиты).
   - **blockType**: тип блокировки:
     - `FRAUD_SUSPICION` — подозрение на мошенничество.
     - `INVALID_REQUISITES` — ошибка в реквизитах.
   - **comments**: дополнительные комментарии к блокировке.
   - **expirationDate** (опционально): дата, когда блокировка автоматически снимается.
   
   После выполнения запроса создается блокировка, и клиенту запрещены исходящие платежи.

2. **Разблокировка платежей клиента**

   Для снятия блокировки используется метод **PATCH** по адресу `/clients/{clientId}/payment-blocks/{blockId}`. В теле запроса указываются:
   
   - **unblockReason**: причина снятия блокировки.
   - **comments**: дополнительные пояснения.
   
   Этот запрос позволяет изменить статус блокировки на `inactive`, что фактически деактивирует блокировку.

3. **Проверка статуса блокировки клиента**

   Для проверки, заблокирован ли клиент, используется метод **GET** по адресу `/clients/{clientId}/payment-status`. Ответ содержит:
   
   - **blocked**: флаг, указывающий на наличие активных блокировок (true/false).
   - **activeBlocks**: список активных блокировок (если они есть).

4. **Детальная информация о блокировке**

   Для получения подробной информации о конкретной блокировке клиента используется метод **GET** по адресу `/clients/{clientId}/payment-blocks/{blockId}`. Ответ включает:
   
   - **reason**: причина блокировки.
   - **blockType**: тип блокировки.
   - **createdAt**: дата и время создания блокировки.
   - **createdBy**: ID сотрудника, создавшего блокировку.
   - **status**: статус блокировки.
   - **comments**: комментарии к блокировке.
   - **expirationDate**: дата и время окончания блокировки (если указана).
   - **unblockReason**: причина разблокировки (если блокировка была снята).

## Пример использования API

- Для создания блокировки платежей:

```bash
POST /clients/{clientId}/payment-blocks
{
  "reason": "Подозрение на мошенничество",
  "blockType": "FRAUD_SUSPICION",
  "comments": "Обнаружены подозрительные транзакции",
  "expirationDate": "2025-04-01T15:00:00Z"
}
```

## Скриншот Swagger
![image](https://github.com/user-attachments/assets/2c806a77-334f-4f89-a955-68e83d68f4d0)
